# Двигаем корабль

## Условия

Иногда необходимо выполнить одно из нескольких действий в зависимости от какого-нибудь условия. Например при нажатии клавиши "Вверх" на клавиатуре необходимо передвинуть наш корабль на 10 пикселей вверх, при нажатии "Вниз" - на 10 пикселей вниз и т.д.
Для обработки условий в python используется оператор `if`.
```python
if V == 1:
   print("Один")
```
Данный код выведет в консоль слово "Один", если переменная с именем `V` равна 1. Все операторы, которые необходимо выполнить, если условие истинно - печатаются с отступом.
Оператор `print` используется для того, чтобы выводить на экран любую информацию.
В питоне для сравнения двух значений используется символ `==` это символ равенства. Также можно использовать и другие (больше, меньше, не равно и т.д.), об этом позже.

В данном коде: 
```python
if V == 1:
   print("Один")
   print("Два")
print("Три")
```
На экран будет выведено слово "Один" и "Два" тогда, когда переменная `V` равна 1. А вот слово "Три" будет выводиться всегда, не важно чему равна переменная.
А в коде выше мы добавляем блок "иначе":
```python
if V == 1:
   print("Один")
   print("Два")
else
	print("Три")
```
В данном коде если переменная `V` равна 1, то выводится на экран два слова "Один" и "Два", а если `V` не равна одному (т.е. иначе, в противном случае), будет выведено "Три".

## Обработка нажатия клавиш

Для обработки нажатия клавиш на холсте используется команда `bind_all`. В нее передается два параметра. Первый параметр говорит что мы отслеживаем - нажатие клавиши (`'<Key>'`) или левой кнопки мыши (`'<Button-1>'`) и т.д., а во второй параметр передается название процедуры, которую запустит python тогда, когда это событие сработает. Эту процедуру мы должны написать сами.

## Процедуры

Процедура - это просто блок с кодом, который можно вызвать по имени, например следующий код создаем процедуру с именем move_ship (двигать корабль):

```python
def move_ship():
	print("Ура")
```

Если запустить код - ничего не произойдет, процедура есть, но ее никто не запускал. Для вызова процедуры достаточно вызвать ее, указав ее имя и передав нужные параметры, если параметров нет - то просто будут пустые скобки:

```python
def move_ship():
	print("Ура")

move_ship()
```

Здесь у нас создается процедура с именем `move_ship`, а затем она вызывается, и на экране мы увидим "Ура". В процедуру можно передавать параметры. Для этого объявляем имя переменной в скобках, и передаем значение в переменную:

```python
def move_ship(txt):
	print(txt)

move_ship("Ура")
```

Здесь создается та же процедура с именем `move_ship`, но указано, что при ее вызове необходимо передавать параметр. То, что придет в первом параметре данной процедуры попадет в переменную `txt`. Далее опратор `print` выведет содержимое данной переменной на экран. Мы вызываем процедуру так: `move_ship("Ура")`, т.е. в первый параметр передаем слово "Ура", оно помещается в переменную `txt` процедуры, где и выводится в консоль с помощью `print`.

Мы назвали переменную холста именем `c` (в коде ранее есть кусок `c = Canvas(...)`), поэтому вызывать команду обработки нажатия клавиш будем следующим образом:

```python
c.bind_all('<Key>', move_ship)
```

python самостоятельно передаст в указанную процедуру параметр с событием (из которого мы узнаем какая клавиша нажата). Процедуру объявляем следующим образом:

```python
def move_ship(event):
	... текст процедуры ...

c.bind_all('<Key>', move_ship)
```

Здесь мы указали, что в процедуру будет передан параметр, значение которого поместится в переменную с именем `event`. Теперь с помощью данной переменной мы узнаем код нажатой клавиши. Код нажатой клавиши можно узнать, взяв свойство `keysym` из переменной `event`. Процедура ниже будет писать в консоль название клавиши каждый раз, как мы ее нажмем:

```python
# тут финальный код из первого урока

def move_ship(event):
	print(event.keysym)

c.bind_all('<Key>', move_ship)
```

Если мы запустим этот код, то увидим на экране окошко со своим кораблем из первого урока, но если мы нажемем клавиши "вверх", "вниз", "вправо" и "влево" на клавиатуре, мы увидим, как они называются в python.

![Окно](https://github.com/trusiwko/Python/raw/master/eKIDS/Lesson2/img/img1.png)

Теперь мы знаем, что при нажатии клавиши "Вверх" значение свойства `event.keysym` равно `'Up'`, а если нажать "Вниз", то `'Down'` и т.д.

Осталось только узнать как перемещать корабль и можно начинать. Для перемещения корабля используется метод `move` нашего холста. Туда мы передаем три параметра: объект, который двигать, насколько изменить координату X и насколько изменить координату Y. Для того, чтобы переместить корабль вверх нужно изменить координату Y, а именно нужно ее уменьшить, т.к. ноль у нас вверху. Чтобы переместить корабль влево, нужно изменить координату X, т.к. ноль у нас слева.
Пока мы будем изменять координаты на 10 пикселей, чтобы корабль быстрее перемещался:

```python
# тут финальный код из первого урока

def move_ship(event):
    if event.keysym == 'Up':
        c.move(ship, 0, -10)
        c.move(ship2, 0, -10)

c.bind_all('<Key>', move_ship)
```

Если запустить даннй код, то корабль будет перемещаться вверх каждый раз, когда мы нажимаем клавишу вверх. Если в дальнейшем мы захотим перемещать корабль быстрее, нужно будет поменять число 10 везде на 20 или более. Это не удобно, будем использовать переменную, например с именем `SHIP_SPD` (скорость корабля):

```python
# тут финальный код из первого урока

SHIP_SPD = 10
def move_ship(event):
    if event.keysym == 'Up':
        c.move(ship, 0, -SHIP_SPD)
        c.move(ship2, 0, -SHIP_SPD)

c.bind_all('<Key>', move_ship)
```

Для проверки нажатия клавиши вниз можно просто добавить это условие, а координату Y не уменьшать на 10, а увеличивать:

```python
# тут финальный код из первого урока

SHIP_SPD = 10
def move_ship(event):
    if event.keysym == 'Up':
        c.move(ship, 0, -SHIP_SPD)
        c.move(ship2, 0, -SHIP_SPD)
	if event.keysym == 'Down':
        c.move(ship, 0, SHIP_SPD)
        c.move(ship2, 0, SHIP_SPD)
		
c.bind_all('<Key>', move_ship)
```

Но лучше всего проверять условие `event.keysym == 'Down'` только тогда, когда первое условие не выполнилось, ведь если код у нажатой клавиши равен `'Up'`, то нет смысла проверять условие на `'Down'` и остальные, мы точно знаем, что они не выполнятся, поэтому условие на `'Down'` проверяем только в блоке "иначе". В python можно объединить блоки "иначе" и новое условие, для этого используем `elif`. И добавим проверку условия еще на две кнопки - "Влево" и "Вправо", но менять будем уже второй параметр (Х), а не третий (Y):

```python
# тут финальный код из первого урока

SHIP_SPD = 10
def move_ship(event):
    if event.keysym == 'Up':
        c.move(ship, 0, -SHIP_SPD)
        c.move(ship2, 0, -SHIP_SPD)
    elif event.keysym == 'Down':
        c.move(ship, 0, SHIP_SPD)
        c.move(ship2, 0, SHIP_SPD)
    elif event.keysym == 'Left':
        c.move(ship, -SHIP_SPD, 0)
        c.move(ship2, -SHIP_SPD, 0)
    elif event.keysym == 'Right':
        c.move(ship, SHIP_SPD, 0)
        c.move(ship2, SHIP_SPD, 0)
		
c.bind_all('<Key>', move_ship)
```

Теперь при нажатии клавиш корабль перемещается по экрану.

# Финальный код:

```python
from tkinter import *
window = Tk()
window.title('Первое окошко')

WIDTH = 600
HEIGHT = 400

c = Canvas(window, width=WIDTH, height=HEIGHT, bg='darkblue')
c.pack()

ship = c.create_polygon(5, 5, 5, 25, 30, 15, fill='red')
ship2 = c.create_oval(0, 0, 30, 30, outline='red')

MID_X = WIDTH / 2
MID_Y = HEIGHT / 2

c.move(ship, MID_X, MID_Y)
c.move(ship2, MID_X, MID_Y)

SHIP_SPD = 10
def move_ship(event):
    if event.keysym == 'Up':
        c.move(ship, 0, -SHIP_SPD)
        c.move(ship2, 0, -SHIP_SPD)
    elif event.keysym == 'Down':
        c.move(ship, 0, SHIP_SPD)
        c.move(ship2, 0, SHIP_SPD)
    elif event.keysym == 'Left':
        c.move(ship, -SHIP_SPD, 0)
        c.move(ship2, -SHIP_SPD, 0)
    elif event.keysym == 'Right':
        c.move(ship, SHIP_SPD, 0)
        c.move(ship2, SHIP_SPD, 0)
		
c.bind_all('<Key>', move_ship)
```
